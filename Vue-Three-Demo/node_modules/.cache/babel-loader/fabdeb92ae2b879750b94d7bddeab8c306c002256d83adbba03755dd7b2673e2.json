{"ast":null,"code":"import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport { Scene, PerspectiveCamera, WebGLRenderer, GLTFLoader, Clock, ACESFilmicToneMapping, sRGBEncoding, HemisphereLight, DirectionalLight, AmbientLight, Box3, Vector3 } from \"three-full\";\nVue.use(Vuex);\nexport default new Vuex.Store({\n  state: {\n    width: 0,\n    height: 0,\n    shoe_size: 0,\n    camera: null,\n    scene: null,\n    renderer: null,\n    model: null,\n    clock: null,\n    controls: null,\n    effectComposer: null,\n    hemiLight: null,\n    dirLight: null,\n    flag: true,\n    zRot: 0\n  },\n  actions: {\n    INIT({\n      state\n    }, {\n      width,\n      height,\n      el\n    }) {\n      return new Promise(resolve => {\n        state.width = width;\n        state.height = height;\n\n        // Clock\n        state.clock = new Clock();\n\n        // Renderer\n        state.renderer = new WebGLRenderer({\n          antialias: true,\n          alpha: true\n        });\n        state.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        state.renderer.setSize(state.width, state.height);\n        state.renderer.toneMapping = ACESFilmicToneMapping;\n        state.renderer.outputEncoding = sRGBEncoding;\n        el.appendChild(state.renderer.domElement);\n\n        // Scene\n        state.scene = new Scene();\n\n        // Camera\n        state.camera = new PerspectiveCamera(75, state.width / state.height, 1, 1000);\n\n        // Light\n        state.hemiLight = new HemisphereLight(0xffffff, 0x444444, 0.6);\n        state.hemiLight.position.set(0, 3, 6);\n        state.scene.add(state.hemiLight);\n        state.dirLight = new DirectionalLight(0xffffff, 1);\n        state.dirLight.position.set(200, 200, 500);\n        state.dirLight.castShadow = true;\n        state.dirLight.shadow.camera.top = 180;\n        state.dirLight.shadow.camera.bottom = -100;\n        state.dirLight.shadow.camera.left = -120;\n        state.dirLight.shadow.camera.right = 120;\n        state.scene.add(state.dirLight);\n        state.scene.add(new AmbientLight(0x404040, 0.5));\n\n        // GLFT\n        state.loader = new GLTFLoader();\n        state.loader.load(\"/shoe.glb\", gltf => {\n          state.model = gltf.scene;\n          state.scene.add(state.model);\n          const shoeSize = new Vector3(0.3138543045691101, 0.1380571369992008, 0.11502264321959318);\n          const aspectRatio = state.width / state.height;\n          const maxDimension = Math.max(shoeSize.x, shoeSize.y, shoeSize.z);\n\n          // Determine which field of view (horizontal or vertical) should be used for the calculation\n          const verticalFov = state.camera.fov * Math.PI / 180;\n          const horizontalFov = 2 * Math.atan(Math.tan(verticalFov / 2) * aspectRatio);\n\n          // Calculate the distances needed for both horizontal and vertical fields of view\n          const verticalDistance = maxDimension / (2 * Math.tan(verticalFov / 2));\n          const horizontalDistance = maxDimension / (2 * Math.tan(horizontalFov / 2));\n\n          // Choose the larger distance to fit the object in the view\n          const distance = Math.max(verticalDistance, horizontalDistance);\n          const paddingFactor = 1.2; // Adjust this value to control the amount of padding around the object\n          const paddedDistance = distance * paddingFactor;\n\n          // Set the camera's position\n          const box = new Box3().setFromObject(state.model);\n          const boxCenter = box.getCenter(new Vector3());\n          state.camera.position.set(boxCenter.x, boxCenter.y, boxCenter.z + paddedDistance);\n\n          // Set the camera to look at the center of the bounding box\n          state.camera.lookAt(boxCenter);\n          state.camera.near = paddedDistance / 10;\n          state.camera.far = paddedDistance * 10;\n          state.camera.updateProjectionMatrix();\n        }, undefined, error => {\n          console.error(error);\n        });\n        resolve();\n      });\n    },\n    ANIMATE({\n      state,\n      dispatch\n    }) {\n      function easeInOutBack(x) {\n        const c1 = 1.70158;\n        const c2 = c1 * 1.525;\n        return x < 0.5 ? Math.pow(2 * x, 2) * ((c2 + 1) * 2 * x - c2) / 2 : (Math.pow(2 * x - 2, 2) * ((c2 + 1) * (x * 2 - 2) + c2) + 2) / 2;\n      }\n      function specialAnimation(t) {\n        const scaleFactor = 0.1;\n        state.model.scale.set(1 + scaleFactor * Math.sin(Math.PI * t), 1, 1 + scaleFactor * Math.sin(Math.PI * t));\n      }\n\n      // Smooth interpolation function for blending rotations\n      function lerp(a, b, t) {\n        return a + (b - a) * t;\n      }\n      window.requestAnimationFrame(() => {\n        if (state.model != null) {\n          let elapsedTime = state.clock.getElapsedTime();\n          const initialHeight = 0.02;\n          if (elapsedTime < 3) {\n            // Load Animation\n            state.model.rotation.y = -easeInOutBack(elapsedTime / 3) * (Math.PI * 2.05);\n\n            // Make the shoe start from a higher position\n            state.model.position.y = initialHeight * easeInOutBack(elapsedTime / 3);\n          } else {\n            // Special Animation every 15 seconds\n            if (Math.floor(elapsedTime / 15) !== Math.floor((elapsedTime - 1) / 15)) {\n              const specialAnimationTime = elapsedTime % 15;\n              specialAnimation(specialAnimationTime);\n            }\n            // Idle Animation\n            if (state.flag == true) {\n              state.flag = false;\n              state.idleElapsed = elapsedTime;\n              state.initialZRotation = null; // Reset initial z-axis rotation\n            }\n\n            const timeSinceIdle = elapsedTime - state.idleElapsed;\n            if (timeSinceIdle <= 3) {\n              state.model.rotation.x = easeInOutBack(elapsedTime % state.idleElapsed / 3) * (Math.PI / 12);\n              state.model.rotation.z = (Math.cos(elapsedTime - state.idleElapsed) - 1) * (Math.PI / 22);\n              state.zRot = state.model.rotation.z;\n            } else {\n              // Save the initial z-axis rotation at the end of the first 3 seconds of idle animation\n              if (state.initialZRotation === null) {\n                state.initialZRotation = state.model.rotation.z;\n              }\n\n              // Add small up and down rotation on z-axis after the first 3 seconds of idle animation\n              const zRotationAmplitude = 0.03; // Adjust this value to change the amplitude of z-axis rotation\n              const targetZRotation = state.initialZRotation + zRotationAmplitude * Math.sin((timeSinceIdle - 3) * Math.PI / 2);\n              state.model.rotation.z = lerp(state.model.rotation.z, targetZRotation, 0.1);\n            }\n            state.model.position.y = initialHeight + Math.sin(timeSinceIdle) * Math.PI / 80;\n          }\n          state.renderer.render(state.scene, state.camera);\n        }\n        dispatch(\"ANIMATE\");\n      });\n    }\n  }\n});","map":{"version":3,"names":["Vue","Vuex","Scene","PerspectiveCamera","WebGLRenderer","GLTFLoader","Clock","ACESFilmicToneMapping","sRGBEncoding","HemisphereLight","DirectionalLight","AmbientLight","Box3","Vector3","use","Store","state","width","height","shoe_size","camera","scene","renderer","model","clock","controls","effectComposer","hemiLight","dirLight","flag","zRot","actions","INIT","el","Promise","resolve","antialias","alpha","setPixelRatio","Math","min","window","devicePixelRatio","setSize","toneMapping","outputEncoding","appendChild","domElement","position","set","add","castShadow","shadow","top","bottom","left","right","loader","load","gltf","shoeSize","aspectRatio","maxDimension","max","x","y","z","verticalFov","fov","PI","horizontalFov","atan","tan","verticalDistance","horizontalDistance","distance","paddingFactor","paddedDistance","box","setFromObject","boxCenter","getCenter","lookAt","near","far","updateProjectionMatrix","undefined","error","console","ANIMATE","dispatch","easeInOutBack","c1","c2","pow","specialAnimation","t","scaleFactor","scale","sin","lerp","a","b","requestAnimationFrame","elapsedTime","getElapsedTime","initialHeight","rotation","floor","specialAnimationTime","idleElapsed","initialZRotation","timeSinceIdle","cos","zRotationAmplitude","targetZRotation","render"],"sources":["/home/mike/shoe-project/Vue-Three-Demo/src/store.js"],"sourcesContent":["import Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport {\n  Scene,\n  PerspectiveCamera,\n  WebGLRenderer,\n  GLTFLoader,\n  Clock,\n  ACESFilmicToneMapping,\n  sRGBEncoding,\n  HemisphereLight,\n  DirectionalLight,\n  AmbientLight,\n  Box3,\n  Vector3,\n} from \"three-full\";\n\nVue.use(Vuex);\n\nexport default new Vuex.Store({\n  state: {\n    width: 0,\n    height: 0,\n    shoe_size: 0,\n    camera: null,\n    scene: null,\n    renderer: null,\n    model: null,\n    clock: null,\n    controls: null,\n    effectComposer: null,\n    hemiLight: null,\n    dirLight: null,\n    flag: true,\n    zRot: 0,\n  },\n  actions: {\n    INIT({ state }, { width, height, el }) {\n      return new Promise((resolve) => {\n        state.width = width;\n        state.height = height;\n\n        // Clock\n        state.clock = new Clock();\n\n        // Renderer\n        state.renderer = new WebGLRenderer({ antialias: true, alpha: true });\n        state.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        state.renderer.setSize(state.width, state.height);\n        state.renderer.toneMapping = ACESFilmicToneMapping;\n        state.renderer.outputEncoding = sRGBEncoding;\n        el.appendChild(state.renderer.domElement);\n\n        // Scene\n        state.scene = new Scene();\n\n        // Camera\n        state.camera = new PerspectiveCamera(\n          75,\n          state.width / state.height,\n          1,\n          1000\n        );\n\n        // Light\n        state.hemiLight = new HemisphereLight(0xffffff, 0x444444, 0.6);\n        state.hemiLight.position.set(0, 3, 6);\n        state.scene.add(state.hemiLight);\n\n        state.dirLight = new DirectionalLight(0xffffff, 1);\n        state.dirLight.position.set(200, 200, 500);\n        state.dirLight.castShadow = true;\n        state.dirLight.shadow.camera.top = 180;\n        state.dirLight.shadow.camera.bottom = -100;\n        state.dirLight.shadow.camera.left = -120;\n        state.dirLight.shadow.camera.right = 120;\n        state.scene.add(state.dirLight);\n\n        state.scene.add(new AmbientLight(0x404040, 0.5));\n\n        // GLFT\n        state.loader = new GLTFLoader();\n        state.loader.load(\n          \"/shoe.glb\",\n          (gltf) => {\n            state.model = gltf.scene;\n            state.scene.add(state.model);\n\n            const shoeSize = new Vector3(\n              0.3138543045691101,\n              0.1380571369992008,\n              0.11502264321959318\n            );\n            const aspectRatio = state.width / state.height;\n\n            const maxDimension = Math.max(shoeSize.x, shoeSize.y, shoeSize.z);\n\n            // Determine which field of view (horizontal or vertical) should be used for the calculation\n            const verticalFov = (state.camera.fov * Math.PI) / 180;\n            const horizontalFov =\n              2 * Math.atan(Math.tan(verticalFov / 2) * aspectRatio);\n\n            // Calculate the distances needed for both horizontal and vertical fields of view\n            const verticalDistance =\n              maxDimension / (2 * Math.tan(verticalFov / 2));\n            const horizontalDistance =\n              maxDimension / (2 * Math.tan(horizontalFov / 2));\n\n            // Choose the larger distance to fit the object in the view\n            const distance = Math.max(verticalDistance, horizontalDistance);\n            const paddingFactor = 1.2; // Adjust this value to control the amount of padding around the object\n            const paddedDistance = distance * paddingFactor;\n\n            // Set the camera's position\n            const box = new Box3().setFromObject(state.model);\n            const boxCenter = box.getCenter(new Vector3());\n            state.camera.position.set(\n              boxCenter.x,\n              boxCenter.y,\n              boxCenter.z + paddedDistance\n            );\n\n            // Set the camera to look at the center of the bounding box\n            state.camera.lookAt(boxCenter);\n\n            state.camera.near = paddedDistance / 10;\n            state.camera.far = paddedDistance * 10;\n            state.camera.updateProjectionMatrix();\n          },\n          undefined,\n          (error) => {\n            console.error(error);\n          }\n        );\n        resolve();\n      });\n    },\n    ANIMATE({ state, dispatch }) {\n      function easeInOutBack(x) {\n        const c1 = 1.70158;\n        const c2 = c1 * 1.525;\n\n        return x < 0.5\n          ? (Math.pow(2 * x, 2) * ((c2 + 1) * 2 * x - c2)) / 2\n          : (Math.pow(2 * x - 2, 2) * ((c2 + 1) * (x * 2 - 2) + c2) + 2) / 2;\n      }\n\n      function specialAnimation(t) {\n        const scaleFactor = 0.1;\n        state.model.scale.set(\n          1 + scaleFactor * Math.sin(Math.PI * t),\n          1,\n          1 + scaleFactor * Math.sin(Math.PI * t)\n        );\n      }\n\n      // Smooth interpolation function for blending rotations\n      function lerp(a, b, t) {\n        return a + (b - a) * t;\n      }\n\n      window.requestAnimationFrame(() => {\n        if (state.model != null) {\n          let elapsedTime = state.clock.getElapsedTime();\n          const initialHeight = 0.02;\n\n          if (elapsedTime < 3) {\n            // Load Animation\n            state.model.rotation.y =\n              -easeInOutBack(elapsedTime / 3) * (Math.PI * 2.05);\n\n            // Make the shoe start from a higher position\n            state.model.position.y =\n              initialHeight * easeInOutBack(elapsedTime / 3);\n          } else {\n            // Special Animation every 15 seconds\n            if (\n              Math.floor(elapsedTime / 15) !==\n              Math.floor((elapsedTime - 1) / 15)\n            ) {\n              const specialAnimationTime = elapsedTime % 15;\n              specialAnimation(specialAnimationTime);\n            }\n            // Idle Animation\n            if (state.flag == true) {\n              state.flag = false;\n              state.idleElapsed = elapsedTime;\n              state.initialZRotation = null; // Reset initial z-axis rotation\n            }\n            const timeSinceIdle = elapsedTime - state.idleElapsed;\n            if (timeSinceIdle <= 3) {\n              state.model.rotation.x =\n                easeInOutBack((elapsedTime % state.idleElapsed) / 3) *\n                (Math.PI / 12);\n              state.model.rotation.z =\n                (Math.cos(elapsedTime - state.idleElapsed) - 1) *\n                (Math.PI / 22);\n              state.zRot = state.model.rotation.z;\n            } else {\n              // Save the initial z-axis rotation at the end of the first 3 seconds of idle animation\n              if (state.initialZRotation === null) {\n                state.initialZRotation = state.model.rotation.z;\n              }\n\n              // Add small up and down rotation on z-axis after the first 3 seconds of idle animation\n              const zRotationAmplitude = 0.03; // Adjust this value to change the amplitude of z-axis rotation\n              const targetZRotation =\n                state.initialZRotation +\n                zRotationAmplitude *\n                  Math.sin(((timeSinceIdle - 3) * Math.PI) / 2);\n              state.model.rotation.z = lerp(\n                state.model.rotation.z,\n                targetZRotation,\n                0.1\n              );\n            }\n            state.model.position.y =\n              initialHeight + (Math.sin(timeSinceIdle) * Math.PI) / 80;\n          }\n          state.renderer.render(state.scene, state.camera);\n        }\n        dispatch(\"ANIMATE\");\n      });\n    },\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}